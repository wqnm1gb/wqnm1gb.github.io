<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Day05 Redis | 三狗子的博客</title>
<meta name=keywords content="苍穹外卖"><meta name=description content="Redis入门
Redis简介
适用于热点存储，存放在内存中，与MySQL不同，MySQL存放在磁盘中，Redis可以更快速的访问

基于内存存储，读写性能高
适合存储热点数据（热点商品、资讯、新闻）
企业应用广泛

redis默认没有密码，也没有用户的概念，如果需要访问，只需要提供密码即可"><meta name=author content="冷漠三狗子丶"><link rel=canonical href=https://wqnm1gb.github.io/posts/day05redis/><link crossorigin=anonymous href=/assets/css/stylesheet.3d688279d829dc24da48acd11f9e33ebea2f39c035e899e1bf4297d8b7aa89b9.css integrity="sha256-PWiCedgp3CTaSKzRH54z6+ovOcA16Jnhv0KX2Leqibk=" rel="preload stylesheet" as=style><link rel=icon href=https://wqnm1gb.github.io/images/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://wqnm1gb.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wqnm1gb.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wqnm1gb.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://wqnm1gb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://wqnm1gb.github.io/posts/day05redis/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel=stylesheet><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><meta property="og:title" content="Day05 Redis"><meta property="og:description" content="Redis入门
Redis简介
适用于热点存储，存放在内存中，与MySQL不同，MySQL存放在磁盘中，Redis可以更快速的访问

基于内存存储，读写性能高
适合存储热点数据（热点商品、资讯、新闻）
企业应用广泛

redis默认没有密码，也没有用户的概念，如果需要访问，只需要提供密码即可"><meta property="og:type" content="article"><meta property="og:url" content="https://wqnm1gb.github.io/posts/day05redis/"><meta property="og:image" content="https://wqnm1gb.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-20T11:07:01+08:00"><meta property="article:modified_time" content="2025-03-20T11:07:01+08:00"><meta property="og:site_name" content="三狗子的博客"><meta property="fb:admins" content="your-facebook-admin-id"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wqnm1gb.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Day05 Redis","item":"https://wqnm1gb.github.io/posts/day05redis/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Day05 Redis","name":"Day05 Redis","description":"Redis入门 Redis简介 适用于热点存储，存放在内存中，与MySQL不同，MySQL存放在磁盘中，Redis可以更快速的访问\n基于内存存储，读写性能高 适合存储热点数据（热点商品、资讯、新闻） 企业应用广泛 redis默认没有密码，也没有用户的概念，如果需要访问，只需要提供密码即可\n","keywords":["苍穹外卖"],"articleBody":"Redis入门 Redis简介 适用于热点存储，存放在内存中，与MySQL不同，MySQL存放在磁盘中，Redis可以更快速的访问\n基于内存存储，读写性能高 适合存储热点数据（热点商品、资讯、新闻） 企业应用广泛 redis默认没有密码，也没有用户的概念，如果需要访问，只需要提供密码即可\nRedis的安装到的地址\nTo start redis now and restart at login: brew services start redis Or, if you don't want/need a background service you can just run: /opt/homebrew/opt/redis/bin/redis-server /opt/homebrew/etc/redis.conf Redis服务默认端口号为 6379，通过快捷键Ctrl +C 即可停止Redis服务\n启动Redis的指令\n/opt/homebrew/opt/redis/bin/redis-server /opt/homebrew/etc/redis.conf /opt/homebrew/etc/redis.conf 这个是redis配置文件的地址\n在配置文件中只需要添加\nrequirepass 123456 就可以指定redis需要密码，并且密码是123456\n注意：\n修改密码后需要重启Redis服务才能生效 Redis配置文件中**＃表示注释** 通过redis-cli.exe命令默认连接的是本地的redis服务，并且使用默认6379端口。也可以通过指定如下参数连接：\n-h ip地址\n-p 端口号\n-a 密码（如果需要）\nkey:value 的形式来存储的\nkey是String类型\nRedis数据类型 5种常用的数据类型 Redis存储的是key-value结构的数据，其中key是字符串类型，value有5种常用的数据类型：\n字符串 String 哈希 Hash 列表 List 集合 set 有序集合 sorted set / zset 各种数据类型的特点 字符串（string）：普通字符串，Redis中最简单的数据类型 哈希（hash）：也叫散列，类似于Java中的HashMap结构（用来存放实体的属性，比如一个人的名字，住址等） 列表（list）：按照插入顺序排序，可以有重复元素，类似于Java中的LinkedList（用于记录有顺序的存储，比如评论按照时间排序） 集合（set）：无序集合，没有重复元素，类似于Java中的HashSet 有序集合（sorted set / zset）：集合中每个元素关联一个分数（score），根据分数升序排序，没有重复元素（用于存放排行榜） Redis常用命令 字符串类型操作命令 设置key的有效时间，常见于手机验证码\n只有在 key 不存在时设置key 的值 如果已经有key这个键了，那就不会更新值 常见场景是分布式锁\nRedis 字符串类型常用命令：\nSET key value 设置指定key的值 GET key 获取指定key的值 SETEX key seconds value 设置指定key的值，并将 key 的过期时间设为 seconds秒 SETNX key value 只有在 key 不存在时设置key 的值 哈希操作命令（H开头） Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象，常用命令：\nHGET key field 获取存储在哈希表中指定字段的值 HSET key field value 将哈希表 key 中的字段 field 的值设为 value HDEL key field 删除存储在哈希表中的指定字段 HKEYS key 获取哈希表中所有字段 HVALS key 获取哈希表中所有值 列表操作命令（L开头） LPUSH key value1 [value2] 将一个或多个值插入到列表头部（左边），如果中间用逗号隔开，相当于一个元素，中间要用空格分开 LRANGE key start stop 获取列表指定范围内的元素,指定尾部是-1相当于把所有元素都返回 RPOP key 移除并获取列表最后一个元素（右边） LLEN key 获取列表长度 集合操作命令（S开头） Redis set 是string类型的无序集合。集合成员是唯一的，集合中不能出现重复的数据，常用命令：\nSADD key member1 ［member2］ 向集合添加一个或多个成员（用空格隔开） SMEMBERS key 返回集合中的所有成员 SCARD key 获取集合的成员数 SINTER key1 ［key2］ 返回给定所有集合的交集 SUNION key1［key2］ 返回所有给定集合的并集 SREM key member1 ［member2］ 删除集合中一个或多个成员 有序集合操作命令（Z开头） Redis有序集合是string类型元素的集合，且不允许有重复成员。每个元素都会关联一个double类型的分数。常用命令：\nZADD key score1 member1 ［score2 member2］ 向有序集合添加一个或多个成员 ZRANGE key start stop ［WITHSCORES］ 通过索引区间返回有序集合中指定区间内的成员，这里边填写的是下标，类似数组的下标 ZINCRBY key increment member 有序集合中对指定成员的分数加上增量 increment ZREM key member ［member ..］ 移除有序集合中的一个或多个成员 通用命令 Redis的通用命令是不分数据类型的，都可以使用的命令：\nKEYS pattern 查找所有符合给定模式（pattern）的 key，也就是查询有没有key的名字是pattern EXISTS key 检查给定 key 是否存在 TYPE key 返回 key 所储存的值的类型 DEL key 该命令用于在 key 存在是删除 key 在java中操作Redis Redis的Java客户端 Redis 的 Java 客户端很多，常用的几种：\nJedis Lettuce Spring Data Redis Spring Data Redis 是Spring的一部分，对 Redis 底层开发包进行了高度封装。在Spring项目中，可以使用Spring Data Redis来简化操作。\nSpring Date Redis使用方式 操作步骤：\n导入Spring Data Redis 的maven坐标 在sky-server的pom.xml\n\u003cdependency\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-starter-data-redis\u003c/artifactId\u003e \u003c/dependency\u003e 配置Redis数据源 在yml文件中配置\nredis: host: localhost port: 6379 password: 123456 database: 10 编写配置类，创建RedisTemplate对象 @Bean // 通过接收一个连接工厂对象，来生成一个模板对象 public RedisTemplate redisTemplate (RedisConnectionFactory redisConnectionFactory){ log.info(\"开始创建Redis模板...\"); RedisTemplate redisTemplate = new RedisTemplate(); // 设置一个Key的序列化器，让设置key的时候不会出现乱码 redisTemplate.setKeySerializer(new StringRedisSerializer()); // 设置连接工厂 redisTemplate.setConnectionFactory(redisConnectionFactory); return redisTemplate; } 通过RedisTemplate对象操作Redis 测试类需要加上注解@SpringBootTest\n@SpringBootTest public class SpringDateRedisTest { @Autowired RedisTemplate redisTemplate; @Test public void testRedisTemplate(){ System.out.println(redisTemplate); // 用来操作不同类型的对象 ValueOperations valueOperations = redisTemplate.opsForValue(); ListOperations listOperations = redisTemplate.opsForList(); HashOperations hashOperations = redisTemplate.opsForHash(); SetOperations setOperations = redisTemplate.opsForSet(); ZSetOperations zSetOperations = redisTemplate.opsForZSet(); } @Test public void testString(){ redisTemplate.opsForValue().set(\"city\",\"东莞\"); String city = (String)redisTemplate.opsForValue().get(\"city\"); System.out.println(city); } } Java中的String和Redis中的String不一样，在Java操作Redis的时候，可以随便传一个Object类型进去，会自动转成Redis中的String然后存储\n序列化器的作用就是让图形化界面展示的时候不会乱码\nRedisTemplate 针对大量api进行了归类封装，将同一数据类型的操作封装对应的Operation接口，具体分类如下：\nValueOperations: string数据操作 SetOperations： set类型数据操作 ZSetOperations：zset类型数据操作 HashOperations:hash类型的数据操作 ListOperations:list类型的数据操作 查询是可以用一个接口的，但是本项目，管理端发出的请求，统一使用/admin作为前缀，用户端发出的请求同意用/user作为前缀\n管理端和用户端获取状态的类名不能相同，因为他们放到容器里边bean的名称会相同，默认名字是类名第一个字母小写，需要修改一下名字\n","wordCount":"2598","inLanguage":"zh","image":"https://wqnm1gb.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-03-20T11:07:01+08:00","dateModified":"2025-03-20T11:07:01+08:00","author":{"@type":"Person","name":"冷漠三狗子丶"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wqnm1gb.github.io/posts/day05redis/"},"publisher":{"@type":"Organization","name":"三狗子的博客","logo":{"@type":"ImageObject","url":"https://wqnm1gb.github.io/images/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wqnm1gb.github.io/ accesskey=h title="主页 (Alt + H)"><img src=https://wqnm1gb.github.io/apple-touch-icon.png alt aria-label=logo height=35>主页</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wqnm1gb.github.io/ title=三狗子的博客><span>首页</span></a></li><li><a href=https://wqnm1gb.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://wqnm1gb.github.io/categories/ title=Categories><span>分类</span></a></li><li><a href=https://wqnm1gb.github.io/tags/ title=Tags><span>标签</span></a></li><li><a href=https://wqnm1gb.github.io/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wqnm1gb.github.io/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wqnm1gb.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://wqnm1gb.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Day05 Redis</h1><div class=post-meta><span title='2025-03-20 11:07:01 +0800 +0800'>三月 20, 2025</span>&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;2598 字&nbsp;·&nbsp;冷漠三狗子丶</div></header><div class=post-content><h1 id=redis入门>Redis入门<a hidden class=anchor aria-hidden=true href=#redis入门>#</a></h1><h2 id=redis简介>Redis简介<a hidden class=anchor aria-hidden=true href=#redis简介>#</a></h2><p>适用于热点存储，存放在<strong>内存</strong>中，与MySQL不同，MySQL存放在磁盘中，Redis可以更快速的访问</p><ul><li>基于内存存储，读写性能高</li><li>适合存储热点数据（热点商品、资讯、新闻）</li><li>企业应用广泛</li></ul><p>redis默认没有密码，也没有用户的概念，如果需要访问，只需要提供密码即可</p><p>Redis的安装到的地址</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>To</span><span class=w> </span><span class=n>start</span><span class=w> </span><span class=n>redis</span><span class=w> </span><span class=n>now</span><span class=w> </span><span class=n>and</span><span class=w> </span><span class=n>restart</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>login</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>brew</span><span class=w> </span><span class=n>services</span><span class=w> </span><span class=n>start</span><span class=w> </span><span class=n>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Or</span><span class=p>,</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>you</span><span class=w> </span><span class=n>don</span><span class=err>&#39;</span><span class=n>t</span><span class=w> </span><span class=n>want</span><span class=o>/</span><span class=n>need</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>background</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=n>you</span><span class=w> </span><span class=n>can</span><span class=w> </span><span class=n>just</span><span class=w> </span><span class=n>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>homebrew</span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>redis</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>redis</span><span class=o>-</span><span class=n>server</span><span class=w> </span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>homebrew</span><span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>redis</span><span class=p>.</span><span class=na>conf</span><span class=w>
</span></span></span></code></pre></div><p>Redis服务默认端口号为 6379，通过快捷键Ctrl +C 即可停止Redis服务</p><p>启动Redis的指令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>homebrew</span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>redis</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>redis</span><span class=o>-</span><span class=n>server</span><span class=w> </span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>homebrew</span><span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>redis</span><span class=p>.</span><span class=na>conf</span><span class=w>
</span></span></span></code></pre></div><p>/opt/homebrew/etc/redis.conf 这个是redis配置文件的地址</p><p>在配置文件中只需要添加</p><p>requirepass 123456 就可以指定redis需要密码，并且密码是123456</p><p><strong>注意：</strong></p><ul><li>修改密码后需要<strong>重启Redis服务</strong>才能生效</li><li>Redis配置文件中**＃表示注释**</li></ul><p>通过redis-cli.exe命令默认连接的是本地的redis服务，并且使用默认6379端口。也可以通过指定如下参数连接：</p><p>-h ip地址</p><p>-p 端口号</p><p>-a 密码（如果需要）</p><p>key:value 的形式来存储的</p><p>key是String类型</p><h2 id=redis数据类型>Redis数据类型<a hidden class=anchor aria-hidden=true href=#redis数据类型>#</a></h2><h3 id=5种常用的数据类型>5种常用的数据类型<a hidden class=anchor aria-hidden=true href=#5种常用的数据类型>#</a></h3><p>Redis存储的是key-value结构的数据，其中key是字符串类型，value有5种常用的数据类型：</p><ul><li>字符串 String</li><li>哈希 Hash</li><li>列表 List</li><li>集合 set</li><li>有序集合 sorted set / zset</li></ul><h3 id=各种数据类型的特点>各种数据类型的特点<a hidden class=anchor aria-hidden=true href=#各种数据类型的特点>#</a></h3><p><img loading=lazy src=/images/Day05Redis.assets/1740051239326-6a21b806-fba4-49c0-8152-d794c6b9e694.png alt></p><ul><li>字符串（string）：普通字符串，Redis中最简单的数据类型</li><li>哈希（hash）：也叫散列，类似于Java中的HashMap结构（用来存放实体的属性，比如一个人的名字，住址等）</li><li>列表（list）：按照插入顺序排序，可以有重复元素，类似于Java中的LinkedList（用于记录有顺序的存储，比如评论按照时间排序）</li><li>集合（set）：<strong>无序</strong>集合，<strong>没有重复元素</strong>，类似于Java中的HashSet</li><li>有序集合（sorted set / zset）：集合中每个元素关联一个分数（score），根据分数升序排序，没有重复元素（用于存放排行榜）</li></ul><h2 id=redis常用命令>Redis常用命令<a hidden class=anchor aria-hidden=true href=#redis常用命令>#</a></h2><h3 id=字符串类型操作命令>字符串类型操作命令<a hidden class=anchor aria-hidden=true href=#字符串类型操作命令>#</a></h3><p>设置key的有效时间，常见于手机验证码</p><p>只有在 <strong>key 不存在</strong>时设置key 的值 如果已经有key这个键了，那就<strong>不会更新值</strong> 常见场景是分布式锁</p><p><strong>Redis 字符串类型常用命令：</strong></p><ul><li>SET key value 设置指定key的值</li><li>GET key 获取指定key的值</li><li>SETEX key seconds value 设置指定key的值，并将 key 的过期时间设为 seconds秒</li><li>SETNX key value 只有在 key 不存在时设置key 的值</li></ul><h3 id=哈希操作命令h开头>哈希操作命令（H开头）<a hidden class=anchor aria-hidden=true href=#哈希操作命令h开头>#</a></h3><p>Redis hash 是一个string类型的field和value的映射表，hash<strong>特别适合用于存储对象</strong>，常用命令：</p><table><thead><tr><th>HGET key field</th><th>获取存储在哈希表中指定字段的值</th></tr></thead><tbody><tr><td>HSET key field value</td><td>将哈希表 key 中的字段 field 的值设为 value</td></tr><tr><td>HDEL key field</td><td>删除存储在哈希表中的指定字段</td></tr><tr><td>HKEYS key</td><td>获取哈希表中所有字段</td></tr><tr><td>HVALS key</td><td>获取哈希表中所有值</td></tr></tbody></table><p><img loading=lazy src=/images/Day05Redis.assets/1740053165175-951ed561-019f-413f-97f5-6f1604a9b708.png alt></p><h3 id=列表操作命令l开头>列表操作命令（L开头）<a hidden class=anchor aria-hidden=true href=#列表操作命令l开头>#</a></h3><table><thead><tr><th>LPUSH key value1 [value2]</th><th>将一个或多个值插入到列表头部（左边），如果中间用逗号隔开，相当于一个元素，中间要用<strong>空格</strong>分开</th></tr></thead><tbody><tr><td>LRANGE key start stop</td><td>获取列表指定范围内的元素,<strong>指定尾部是-1相当于把所有元素都返回</strong></td></tr><tr><td>RPOP key</td><td>移除并获取列表最后一个元素（右边）</td></tr><tr><td>LLEN key</td><td>获取列表长度</td></tr></tbody></table><p><img loading=lazy src=/images/Day05Redis.assets/1740053171198-dcfdd323-914e-4d59-8ffd-44eaf85ee931.png alt></p><h3 id=集合操作命令s开头>集合操作命令（S开头）<a hidden class=anchor aria-hidden=true href=#集合操作命令s开头>#</a></h3><p>Redis set 是string类型的无序集合。集合<strong>成员是唯一的</strong>，集合中<strong>不能出现重复的数据</strong>，常用命令：</p><table><thead><tr><th>SADD key member1 ［member2］</th><th>向集合添加一个或多个成员（用空格隔开）</th></tr></thead><tbody><tr><td>SMEMBERS key</td><td>返回集合中的所有成员</td></tr><tr><td>SCARD key</td><td>获取集合的成员数</td></tr><tr><td>SINTER key1 ［key2］</td><td>返回给定所有集合的<strong>交集</strong></td></tr><tr><td>SUNION key1［key2］</td><td>返回所有给定集合的并集</td></tr><tr><td>SREM key member1 ［member2］</td><td>删除集合中一个或多个成员</td></tr></tbody></table><p><img loading=lazy src=/images/Day05Redis.assets/1740099171316-b22b8fa2-e33a-4984-9712-ef11a0e2320a.png alt></p><h3 id=有序集合操作命令z开头>有序集合操作命令（Z开头）<a hidden class=anchor aria-hidden=true href=#有序集合操作命令z开头>#</a></h3><p>Redis有序集合是string类型元素的集合，且<strong>不允许有重复成员</strong>。每个元素都会<strong>关联一个double类型的分数</strong>。常用命令：</p><table><thead><tr><th>ZADD key score1 member1 ［score2 member2］</th><th>向有序集合添加一个或多个成员</th></tr></thead><tbody><tr><td>ZRANGE key start stop ［WITHSCORES］</td><td>通过索引区间返回有序集合中指定区间内的成员，<strong>这里边填写的是下标，类似数组的下标</strong></td></tr><tr><td>ZINCRBY key increment member</td><td>有序集合中对指定成员的分数加上增量 increment</td></tr><tr><td>ZREM key member ［member ..］</td><td>移除有序集合中的一个或多个成员</td></tr></tbody></table><p><img loading=lazy src=/images/Day05Redis.assets/1740099178748-8b1cc343-7e77-4c4f-af8f-7f4d5f89e0bd.png alt></p><h3 id=通用命令>通用命令<a hidden class=anchor aria-hidden=true href=#通用命令>#</a></h3><p>Redis的通用命令是不分数据类型的，都可以使用的命令：</p><table><thead><tr><th>KEYS pattern</th><th>查找所有符合给定模式（pattern）的 key，也就是查询有没有key的名字是pattern</th></tr></thead><tbody><tr><td>EXISTS key</td><td>检查给定 key 是否存在</td></tr><tr><td>TYPE key</td><td>返回 key 所储存的值的类型</td></tr><tr><td>DEL key</td><td>该命令用于在 key 存在是删除 key</td></tr></tbody></table><h2 id=在java中操作redis>在java中操作Redis<a hidden class=anchor aria-hidden=true href=#在java中操作redis>#</a></h2><h3 id=redis的java客户端>Redis的Java客户端<a hidden class=anchor aria-hidden=true href=#redis的java客户端>#</a></h3><p>Redis 的 Java 客户端很多，常用的几种：</p><ul><li>Jedis</li><li>Lettuce</li><li>Spring Data Redis</li></ul><p>Spring Data Redis 是Spring的一部分，对 Redis 底层开发包进行了高度封装。在<strong>Spring项目</strong>中，可以使用Spring Data Redis来<strong>简化操作</strong>。</p><h3 id=spring-date-redis使用方式>Spring Date Redis使用方式<a hidden class=anchor aria-hidden=true href=#spring-date-redis使用方式>#</a></h3><p>操作步骤：</p><ol><li>导入Spring Data Redis 的maven坐标</li></ol><p>在sky-server的pom.xml</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>        </span><span class=o>&lt;</span><span class=n>dependency</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=o>&lt;</span><span class=n>groupId</span><span class=o>&gt;</span><span class=n>org</span><span class=p>.</span><span class=na>springframework</span><span class=p>.</span><span class=na>boot</span><span class=o>&lt;/</span><span class=n>groupId</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=o>&lt;</span><span class=n>artifactId</span><span class=o>&gt;</span><span class=n>spring</span><span class=o>-</span><span class=n>boot</span><span class=o>-</span><span class=n>starter</span><span class=o>-</span><span class=n>data</span><span class=o>-</span><span class=n>redis</span><span class=o>&lt;/</span><span class=n>artifactId</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>&lt;/</span><span class=n>dependency</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div><ol start=2><li>配置Redis数据源</li></ol><p>在yml文件中配置</p><p><img loading=lazy src=/images/Day05Redis.assets/1740114738381-1d4ee7cc-6472-421d-bfd5-c733d2ccf4df.png alt></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>  </span><span class=n>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>host</span><span class=p>:</span><span class=w> </span><span class=n>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>port</span><span class=p>:</span><span class=w> </span><span class=n>6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>password</span><span class=p>:</span><span class=w> </span><span class=n>123456</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>database</span><span class=p>:</span><span class=w> </span><span class=n>10</span><span class=w>
</span></span></span></code></pre></div><ol start=3><li>编写配置类，创建RedisTemplate对象</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 通过接收一个连接工厂对象，来生成一个模板对象</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>RedisTemplate</span><span class=w> </span><span class=nf>redisTemplate</span><span class=w> </span><span class=p>(</span><span class=n>RedisConnectionFactory</span><span class=w> </span><span class=n>redisConnectionFactory</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;开始创建Redis模板...&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RedisTemplate</span><span class=w> </span><span class=n>redisTemplate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RedisTemplate</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//        设置一个Key的序列化器，让设置key的时候不会出现乱码</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>setKeySerializer</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>StringRedisSerializer</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//        设置连接工厂</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>setConnectionFactory</span><span class=p>(</span><span class=n>redisConnectionFactory</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><ol start=4><li>通过RedisTemplate对象操作Redis</li></ol><p>测试类需要加上注解@SpringBootTest</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@SpringBootTest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SpringDateRedisTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>RedisTemplate</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>testRedisTemplate</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>redisTemplate</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//        用来操作不同类型的对象</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ValueOperations</span><span class=w> </span><span class=n>valueOperations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForValue</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ListOperations</span><span class=w> </span><span class=n>listOperations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForList</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>HashOperations</span><span class=w> </span><span class=n>hashOperations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForHash</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SetOperations</span><span class=w> </span><span class=n>setOperations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForSet</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ZSetOperations</span><span class=w> </span><span class=n>zSetOperations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForZSet</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>testString</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForValue</span><span class=p>().</span><span class=na>set</span><span class=p>(</span><span class=s>&#34;city&#34;</span><span class=p>,</span><span class=s>&#34;东莞&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>city</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=p>)</span><span class=n>redisTemplate</span><span class=p>.</span><span class=na>opsForValue</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;city&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>city</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><img loading=lazy src=/images/Day05Redis.assets/1740117638735-3a89603f-76b6-4a89-a8f8-ab3c81d954f3.png alt></p><p>Java中的String和Redis中的String不一样，在Java操作Redis的时候，可以随便传一个Object类型进去，会自动转成Redis中的String然后存储</p><p>序列化器的作用就是让图形化界面展示的时候不会乱码</p><p>RedisTemplate 针对大量api进行了归类封装，将同一数据类型的操作封装对应的Operation接口，具体分类如下：</p><ul><li>ValueOperations: string数据操作</li><li>SetOperations： set类型数据操作</li><li>ZSetOperations：zset类型数据操作</li><li>HashOperations:hash类型的数据操作</li><li>ListOperations:list类型的数据操作</li></ul><p>查询是可以用一个接口的，但是本项目，管理端发出的请求，统一使用/admin作为前缀，用户端发出的请求同意用/user作为前缀</p><p>管理端和用户端获取状态的类名不能相同，因为他们放到容器里边bean的名称会相同，默认名字是类名第一个字母小写，需要修改一下名字</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wqnm1gb.github.io/tags/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/>苍穹外卖</a></li></ul><nav class=paginav><a class=prev href=https://wqnm1gb.github.io/posts/day06%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E5%95%86%E5%93%81%E6%B5%8F%E8%A7%88/><span class=title>« 上一页</span><br><span>Day06 微信登录、商品浏览</span>
</a><a class=next href=https://wqnm1gb.github.io/posts/day04%E5%A5%97%E9%A4%90%E7%AE%A1%E7%90%86/><span class=title>下一页 »</span><br><span>Day04 套餐管理</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wqnm1gb.github.io/>三狗子的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>