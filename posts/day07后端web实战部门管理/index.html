<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Day07 后端Web实战（部门管理） | 三狗子的博客</title>
<meta name=keywords content="java Web"><meta name=description content="开发规范
前后端分离开发


具体的开发流程


前端开发的服务部署在Nginx服务器上边，后端开发的服务部署在Tomcat服务器上边
Rest风格
REST （REpresentational state Transfer），表述性状态转换，它是一种软件架构风格。"><meta name=author content="冷漠三狗子丶"><link rel=canonical href=https://wqnm1gb.github.io/posts/day07%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86/><link crossorigin=anonymous href=/assets/css/stylesheet.3d688279d829dc24da48acd11f9e33ebea2f39c035e899e1bf4297d8b7aa89b9.css integrity="sha256-PWiCedgp3CTaSKzRH54z6+ovOcA16Jnhv0KX2Leqibk=" rel="preload stylesheet" as=style><link rel=icon href=https://wqnm1gb.github.io/images/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://wqnm1gb.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wqnm1gb.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wqnm1gb.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://wqnm1gb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://wqnm1gb.github.io/posts/day07%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel=stylesheet><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><meta property="og:title" content="Day07 后端Web实战（部门管理）"><meta property="og:description" content="开发规范
前后端分离开发


具体的开发流程


前端开发的服务部署在Nginx服务器上边，后端开发的服务部署在Tomcat服务器上边
Rest风格
REST （REpresentational state Transfer），表述性状态转换，它是一种软件架构风格。"><meta property="og:type" content="article"><meta property="og:url" content="https://wqnm1gb.github.io/posts/day07%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86/"><meta property="og:image" content="https://wqnm1gb.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-06T10:05:28+08:00"><meta property="article:modified_time" content="2025-03-06T10:05:28+08:00"><meta property="og:site_name" content="三狗子的博客"><meta property="fb:admins" content="your-facebook-admin-id"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wqnm1gb.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Day07 后端Web实战（部门管理）","item":"https://wqnm1gb.github.io/posts/day07%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Day07 后端Web实战（部门管理）","name":"Day07 后端Web实战（部门管理）","description":"开发规范 前后端分离开发 具体的开发流程\n前端开发的服务部署在Nginx服务器上边，后端开发的服务部署在Tomcat服务器上边\nRest风格 REST （REpresentational state Transfer），表述性状态转换，它是一种软件架构风格。\n","keywords":["java Web"],"articleBody":"开发规范 前后端分离开发 具体的开发流程\n前端开发的服务部署在Nginx服务器上边，后端开发的服务部署在Tomcat服务器上边\nRest风格 REST （REpresentational state Transfer），表述性状态转换，它是一种软件架构风格。\nREST风格url 请求方式 含义 http://localhost:8080/users/1 GET 查询id为1的用户 http://localhost:8080/users/1 DELETE 删除id为1的用户 http://localhost:8080/users POST 新增用户 http://localhost:8080/users PUT 修改用户 URL定位资源\nHTTP****动词描述操作\n简洁、规范、优雅\n1．REST是风格，是约定方式，约定不是规定，可以打破。\n描述功能模块通常使用复数形式（加s），表示此类资源，而非单个资源。如：users、books… APIFOX 介绍：Apifox是一款集成了Api文档、Api调试、Api Mock、Api测试的一体化协作平台。\n作用：接口文档管理、接口请求测试、Mock服务。\n在Mybatis框架中，持久层的名字不叫做dao叫做Mapper\n工程搭建 创建SpringBoot工程，并引入web开发起步依赖、mybatis、mysqL驱动、lombok。 创建数据库表dept，并在application.ymL中配置数据库的基本信息。 准备基础代码结构，并引入实体类Dept及统一的响应结果封装类 Result。 空项目的准备：\n创建一个空项目 检查Maven的路径 改项目的字符集编码 部门查询功能 Controller层 // 使用RestController注解会把返回的对象转换成json格式给到页面 @RestController public class DeptController { @Autowired private DeptService deptService; @GetMapping(\"/depts\") public Result list(){ List\u003cDept\u003e depts= deptService.findAll(); return Result.success(depts); } } 使用GetMapping可以限定只能用Get方式进行请求\nGET方式：@GetMapping POST方式：@PostMapping PUT方式：@PutMapping DELETE方式：@DeleteMapping 另一种方式限定用Get请求：\n@RequestMapping(value=\"/depts\",method=RequestMothod.GET)\n405请求用的方法不允许，比如说只允许使用GET请求，但是却用了POST\nService层 // @Service注解是加在实现类上边的，不是加在接口上 @Service public class DeptServiceImpl implements DeptService { @Autowired private DeptMapper deptMapper; @Override public List\u003cDept\u003e findAll() { return deptMapper.findAll(); } } Mapper层 @Mapper public interface DeptMapper { // 查询结果的返回值会自动到List集合中，规则是实体类的属性名和数据库查询返回的字段名需要一致 @Select(\"select id, name, create_time, update_time from dept;\") List\u003cDept\u003e findAll(); } 数据封装 实体类属性名 和 数据库表查询返回的字段名一致，mybatis会自动封装。\n如果实体类属性名 和 数据库表查询返回的字段名不一致，不能自动封装。\n方式1：手动结果封装 通过 @Results及@Result号 进行手动结果映射。\n@Results({ @Result(column =\"create_time\" ,property =\"createTime\" ), @Result(column = \"update_time\",property = \"updateTime\") }) 方式2：起别名 @Select(\"select id, name, create_time createTime, update_time updateTime from dept;\") 方式3：开启驼峰命名开关（推荐） （要求：xxx_abc-\u003exxxAbc）\nmybatis: configuration: map-underscore-to-camel-case: true 前后端联调测试 前端工程请求服务器的地址为http://localhost:90/api/depts，是如何访问到后端的tomcat服务器的？\n因为使用了反向代理\n反向代理是一种网络架构，通过代理服务器为后端的服务器做代理，客户端的请求直接请求代理服务器，然后转发给后端的服务器。（安全、灵活、负载均衡）\n前端不会直接知道后端服务器的ip地址，可以保证一定的安全性，后端如果新增了服务器，前端也不需要知道，变得更加的灵活，而且多个后端服务器可以负载均衡，可以发来一次请求，就让一个不同的后端服务器进行处理\nnginx中的配置文件 1.location：用于定义匹配路径匹配的规则。\n2.^~ /api/：表示精确匹配，即只匹配以/api/开头的路径。\n3.rewrite：该指令用于重写匹配到的路径。\n4.proxy_pass：该指令用于代理转发，它将匹配到的请求转发给位于后端的指令服务器。\n删除部门 Controller层 方式一：通过原始的 HttpServletRequest 对象获取请求参数 @DeleteMapping(\"/depts\") public Result delete(HttpServletRequest request){ String idStr=request.getParameter(\"id\"); // 把String字符串转换为int类型 int id = Integer.parseInt(idStr); System.out.println(\"要删除的id是\"+id); return Result.success(); } 繁琐，手动类型转换\n方式二：通过Spring提供的@RequestParam注解，将请求参数绑定给方法形参 @DeleteMapping(\"/depts\") public Result delete(@RequestParam(\"id\") Integer deptId){ System.out.println(\"根据ID删除部门: \" + deptId); return Result.success(); } @RequestParam注解required属性默认为true，代表该参数必须传递，如果不传递将报错。如果参数可选，可以将属性设置为false。\n方式三：如果请求参数名与形参变量名相同，直接定义方法形参即可接收。（省略@RequestParam，推荐使用） @DeleteMapping(\"/depts\") public Result delete(Integer id){ System.out.println(\"根据ID删除部门: \" + id); return Result.success(); } 新增部门 由于有creat_time和update_time两个属性没有补全，需要在Service层进行补全\n新增操作需要的数据是从POST请求传过去的\nController层 接收json格式的请求参数：POST /depts ｛“name”：“教研部”｝\nJSON格式的参数，通常会使用一个实体对象进行接收。\n规则：JSON数据的键名与方法形参对象的属性名相同，并需要使用@RequestBody注解标识。\n@RequestBody可以将一个Json格式的请求数据直接封装到对象当中\n@PostMapping(\"/depts\") public Result add(@RequestBody Dept dept){ deptService.add(dept); System.out.println(dept); return Result.success(); } Service层 @Override public void add(Dept dept) { dept.setCreateTime(LocalDateTime.now()); dept.setUpdateTime(LocalDateTime.now()); deptMapper.add(dept); } 给时间这个属性赋值，调用库LocalDateTime\nMapper层 @Insert(\"insert into dept(name, create_time, update_time) values(#{name}, #{createTime}, #{updateTime})\") void add(Dept dept); 修改部门 修改部门有两个操作，一般修改操作都会有两个操作：1、查询回显 2、修改数据\n查询回显 接收的参数是路径参数，需要用/depts/{id} 来接收\nController层 @GetMapping(\"/depts/{id}\") public Result getById(@PathVariable(\"id\") Integer id){ System.out.println(\"想要查询的id是\"+id); Dept dept=deptService.getById(id); return Result.success(dept); } 路径参数接收\n/depts/1，/depts/2 这种在url中传递的参数，我们称之为路径参数。 那么如何接收这样的路径参数呢 ？\n路径参数：通过请求URL直接传递参数，使用{…}来标识该路径参数，需要使用 **@PathVariable**获取路径参数。\n注意需要使用注解@PathVariable，如果要赋值的参数和接收的参数名字一样可以简写\n如果路径参数名与controller方法形参名称一致，@PathVariable注解的value属性是可以省略的。\n@GetMapping(\"/depts/{id}\") public Result getById(@PathVariable Integer id) 在url中是否可以携带多个路径参数呢，如：/depts/1/0\n答：可以，接收方式如下\n修改数据 用的是PUT请求（一般用于更新或者修改数据）\n@PutMapping(\"/depts\") public Result update(@RequestBody Dept dept){ deptService.update(dept); System.out.println(\"需要更新的部门是\"+dept); return Result.success(); } @RequestMapping 每一个请求都包括了(\"/depts\")\n可以把这个整体抽象到类的上边\n一个完整的请求路径，应该是类上的 @RequestMapping 的value属性 + 方法上的 @RequestMapping的value属性。\n日志技术 Slf4j提供的是一套日志操作的接口，最终底层执行的还是Log4j或者Logback的底层日志框架\nLogback快速入门 准备工作：引入logback的依赖（springboot项目中该依赖已传递）、配置文件logback.xml。\n记录日志：定义日志记录对象Logger，记录日志。\n步骤 1、准备工作：引入logback的依赖（springboot中无需引入，在springboot中已经传递了此依赖）\n2、引入配置文件logback.xml\n3、记录入职：定义日志记录对象Logger：\npublic class LogTest { //定义日志记录对象 private static final Logger log = LoggerFactory.getLogger(LogTest.class); @Test public void testLog(){ log.debug(\"开始计算...\"); int sum = 0; int[] nums = {1, 5, 3, 2, 1, 4, 5, 4, 6, 7, 4, 34, 2, 23}; for (int i = 0; i \u003c nums.length; i++) { sum += nums[i]; } log.info(\"计算结果为: \"+sum); log.debug(\"结束计算...\"); } } 配置文件详解 配置文件名：logback.xml\n该配置文件是对Logback日志框架输出的日志进行控制的，可以来配置输出的格式、位置及日志开关等。\n常用的两种输出日志的位置：控制台、系统文件\n\u003cappender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"\u003e... \u003cappender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"\u003e... 开启日志或者关闭日志\n\u003croot level=\"ALL\"\u003e \u003cappender-ref ref=\"STDOUT\" /\u003e \u003cappender-ref ref=\"FILE\" /\u003e \u003c/root\u003e level=ALL指定输出所有的日志\nlevel=OFF指定关闭所有的日志输出（不用指定大小写）\n如果给的值是一个日志级别，那么只会输出这个日志级别及以上的日志信息\nLogback日志级别 日志级别指的是日志信息的类型，日志都会分级别，常见的日志级别如下（级别由低到高）：\n日志级别 说明 记录方式 trace 追踪，记录程序运行轨迹 【使用很少】 log.trace(\"…\") debug 调试，记录程序调试过程中的信息，实际应用中一般将其视为最低级别 【使用较多】 log.debug(\"…\") info 记录一般信息，描述程序运行的关键事件，如：网络连接、io操作 【使用较多】 log.info(\"…\") warn 警告信息，记录潜在有害的情况 【使用较多】 log.warn(\"…\") error 错误信息 【使用较多】 log.error(\"…\") 可以在配置文件中，灵活的控制输出那些类型的日志。\n\u003croot level=\"info\"\u003e \u003cappender-ref ref=\"STDOUT\" /\u003e \u003cappender-ref ref=\"FILE\" /\u003e \u003c/root\u003e 有Lombok后直接用注释@Sfl4j 就会生成一个日志对象\n在logback中提供了简化方式，如果输出的字符串里边的参数很多，需要用加号拼接很麻烦，可以使用{}占位符，调用info方法的时候，有多少个占位符，传递多少个参数，会自动替换，就可以避免字符串的拼接\n简化了这个代码：这个代码只有类的字节码文件需要改变\nprivate static final Logger log = LoggerFactory.getLogger(LogTest.class);\n\u003cpattern\u003e%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50}-%msg%n\u003c/pattern\u003e SSS是需要显示毫秒，logger{50}是最多显示50个字符，如果超过了50个字符，会自动简写\n","wordCount":"4039","inLanguage":"zh","image":"https://wqnm1gb.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-03-06T10:05:28+08:00","dateModified":"2025-03-06T10:05:28+08:00","author":{"@type":"Person","name":"冷漠三狗子丶"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wqnm1gb.github.io/posts/day07%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86/"},"publisher":{"@type":"Organization","name":"三狗子的博客","logo":{"@type":"ImageObject","url":"https://wqnm1gb.github.io/images/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wqnm1gb.github.io/ accesskey=h title="主页 (Alt + H)"><img src=https://wqnm1gb.github.io/apple-touch-icon.png alt aria-label=logo height=35>主页</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wqnm1gb.github.io/ title=三狗子的博客><span>首页</span></a></li><li><a href=https://wqnm1gb.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://wqnm1gb.github.io/categories/ title=Categories><span>分类</span></a></li><li><a href=https://wqnm1gb.github.io/tags/ title=Tags><span>标签</span></a></li><li><a href=https://wqnm1gb.github.io/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wqnm1gb.github.io/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wqnm1gb.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://wqnm1gb.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Day07 后端Web实战（部门管理）</h1><div class=post-meta><span title='2025-03-06 10:05:28 +0800 +0800'>三月 6, 2025</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;4039 字&nbsp;·&nbsp;冷漠三狗子丶</div></header><div class=post-content><h1 id=开发规范>开发规范<a hidden class=anchor aria-hidden=true href=#开发规范>#</a></h1><h2 id=前后端分离开发>前后端分离开发<a hidden class=anchor aria-hidden=true href=#前后端分离开发>#</a></h2><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733106041883-ae50ca98-077f-4fca-8d85-f63a67e1b6e3.png alt></p><p>具体的开发流程</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733106103374-a306fb38-330f-4082-8f06-c4285c961d85.png alt></p><p>前端开发的服务部署在Nginx服务器上边，后端开发的服务部署在Tomcat服务器上边</p><h2 id=rest风格>Rest风格<a hidden class=anchor aria-hidden=true href=#rest风格>#</a></h2><p>REST （REpresentational state Transfer），表述性状态转换，它是一种软件架构风格。</p><table><thead><tr><th>REST风格url</th><th style=text-align:center>请求方式</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td>http://localhost:8080/users/1</td><td style=text-align:center>GET</td><td style=text-align:center>查询id为1的用户</td></tr><tr><td>http://localhost:8080/users/1</td><td style=text-align:center>DELETE</td><td style=text-align:center>删除id为1的用户</td></tr><tr><td>http://localhost:8080/users</td><td style=text-align:center>POST</td><td style=text-align:center>新增用户</td></tr><tr><td>http://localhost:8080/users</td><td style=text-align:center>PUT</td><td style=text-align:center>修改用户</td></tr></tbody></table><p><strong>URL定位资源</strong></p><p><strong>HTTP****动词描述操作</strong></p><p><strong>简洁、规范、优雅</strong></p><p>1．REST是风格，是约定方式，约定不是规定，可以打破。</p><ol start=2><li>描述功能模块通常使用复数形式（加s），表示此类资源，而非单个资源。如：users、books&mldr;</li></ol><h2 id=apifox>APIFOX<a hidden class=anchor aria-hidden=true href=#apifox>#</a></h2><p>介绍：Apifox是一款集成了Api文档、Api调试、Api Mock、Api测试的一体化协作平台。</p><p>作用：接口文档管理、接口请求测试、Mock服务。</p><p>在Mybatis框架中，持久层的名字不叫做dao叫做Mapper</p><h1 id=工程搭建>工程搭建<a hidden class=anchor aria-hidden=true href=#工程搭建>#</a></h1><ol><li>创建SpringBoot工程，并引入web开发起步依赖、mybatis、mysqL驱动、lombok。</li><li>创建数据库表dept，并在application.ymL中配置数据库的基本信息。</li><li>准备基础代码结构，并引入实体类Dept及统一的响应结果封装类 Result。</li></ol><p>空项目的准备：</p><ul><li>创建一个空项目</li><li>检查Maven的路径</li><li>改项目的字符集编码</li></ul><h1 id=部门查询功能>部门查询功能<a hidden class=anchor aria-hidden=true href=#部门查询功能>#</a></h1><h2 id=controller层>Controller层<a hidden class=anchor aria-hidden=true href=#controller层>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 使用RestController注解会把返回的对象转换成json格式给到页面</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DeptController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>DeptService</span><span class=w> </span><span class=n>deptService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>list</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Dept</span><span class=o>&gt;</span><span class=w> </span><span class=n>depts</span><span class=o>=</span><span class=w> </span><span class=n>deptService</span><span class=p>.</span><span class=na>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>(</span><span class=n>depts</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>使用GetMapping可以限定只能用Get方式进行请求</p><ul><li>GET方式：@GetMapping</li><li>POST方式：@PostMapping</li><li>PUT方式：@PutMapping</li><li>DELETE方式：@DeleteMapping</li></ul><p>另一种方式限定用Get请求：</p><p>@RequestMapping(value="/depts",method=RequestMothod.GET)</p><p>405请求用的方法不允许，比如说只允许使用GET请求，但是却用了POST</p><h2 id=service层>Service层<a hidden class=anchor aria-hidden=true href=#service层>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// @Service注解是加在实现类上边的，不是加在接口上</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DeptServiceImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>DeptService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>DeptMapper</span><span class=w> </span><span class=n>deptMapper</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Dept</span><span class=o>&gt;</span><span class=w> </span><span class=nf>findAll</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>deptMapper</span><span class=p>.</span><span class=na>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=mapper层>Mapper层<a hidden class=anchor aria-hidden=true href=#mapper层>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Mapper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>DeptMapper</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 查询结果的返回值会自动到List集合中，规则是实体类的属性名和数据库查询返回的字段名需要一致</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Select</span><span class=p>(</span><span class=s>&#34;select id, name, create_time, update_time from dept;&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Dept</span><span class=o>&gt;</span><span class=w> </span><span class=nf>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733189344514-06a14c03-3f6e-4b0f-a01d-e73f762e0255.png alt></p><h2 id=数据封装>数据封装<a hidden class=anchor aria-hidden=true href=#数据封装>#</a></h2><p><strong>实体类属性名</strong> 和 <strong>数据库表查询返回的字段名</strong>一致，mybatis会自动封装。</p><p>如果实体类属性名 和 数据库表查询返回的字段名不一致，不能自动封装。</p><h3 id=方式1手动结果封装>方式1：手动结果封装<a hidden class=anchor aria-hidden=true href=#方式1手动结果封装>#</a></h3><p>通过 @Results及@Result号 进行手动结果映射。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@Results</span><span class=p>({</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=nd>@Result</span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=o>=</span><span class=s>&#34;create_time&#34;</span><span class=w> </span><span class=p>,</span><span class=n>property</span><span class=w> </span><span class=o>=</span><span class=s>&#34;createTime&#34;</span><span class=w> </span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=nd>@Result</span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;update_time&#34;</span><span class=p>,</span><span class=n>property</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;updateTime&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>})</span><span class=w>
</span></span></span></code></pre></div><h3 id=方式2起别名>方式2：起别名<a hidden class=anchor aria-hidden=true href=#方式2起别名>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Select</span><span class=p>(</span><span class=s>&#34;select id, name, create_time createTime, update_time updateTime from dept;&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h3 id=方式3开启驼峰命名开关推荐>方式3：开启驼峰命名开关（推荐）<a hidden class=anchor aria-hidden=true href=#方式3开启驼峰命名开关推荐>#</a></h3><p>（要求：xxx_abc->xxxAbc）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>mybatis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>configuration</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>map</span><span class=o>-</span><span class=n>underscore</span><span class=o>-</span><span class=n>to</span><span class=o>-</span><span class=n>camel</span><span class=o>-</span><span class=k>case</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><h1 id=前后端联调测试>前后端联调测试<a hidden class=anchor aria-hidden=true href=#前后端联调测试>#</a></h1><p>前端工程请求服务器的地址为<a href=http://localhost:90/api/depts>http://localhost:90/api/depts</a>，是如何访问到后端的tomcat服务器的？</p><p>因为使用了反向代理</p><p>反向代理是一种网络架构，通过代理服务器为后端的服务器做代理，客户端的请求直接请求代理服务器，然后转发给后端的服务器。（安全、灵活、负载均衡）</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733194658943-53653209-7074-4ef6-a1d5-365ec30481e2.png alt></p><p>前端不会直接知道后端服务器的ip地址，可以保证一定的安全性，后端如果新增了服务器，前端也不需要知道，变得更加的灵活，而且多个后端服务器可以负载均衡，可以发来一次请求，就让一个不同的后端服务器进行处理</p><h2 id=nginx中的配置文件>nginx中的配置文件<a hidden class=anchor aria-hidden=true href=#nginx中的配置文件>#</a></h2><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733194710442-8bf62d78-6560-47d9-bf2d-d702e7aa622b.png alt></p><p>1.location：用于定义匹配路径匹配的规则。</p><p>2.^~ /api/：表示精确匹配，即只匹配以/api/开头的路径。</p><p>3.rewrite：该指令用于重写匹配到的路径。</p><p>4.proxy_pass：该指令用于代理转发，它将匹配到的请求转发给位于后端的指令服务器。</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733194785987-97daabc3-4c4c-460d-bfca-246b0bfba0ee.png alt></p><h1 id=删除部门>删除部门<a hidden class=anchor aria-hidden=true href=#删除部门>#</a></h1><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733274025142-0e932449-ef5e-4c9b-b335-646261b5b5b4.png alt></p><h2 id=controller层-1>Controller层<a hidden class=anchor aria-hidden=true href=#controller层-1>#</a></h2><h3 id=方式一通过原始的-httpservletrequest-对象获取请求参数>方式一：通过原始的 HttpServletRequest 对象获取请求参数<a hidden class=anchor aria-hidden=true href=#方式一通过原始的-httpservletrequest-对象获取请求参数>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@DeleteMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>request</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>idStr</span><span class=o>=</span><span class=n>request</span><span class=p>.</span><span class=na>getParameter</span><span class=p>(</span><span class=s>&#34;id&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 把String字符串转换为int类型</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>idStr</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;要删除的id是&#34;</span><span class=o>+</span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>繁琐，手动类型转换</p><h3 id=方式二通过spring提供的requestparam注解将请求参数绑定给方法形参>方式二：通过Spring提供的@RequestParam注解，将请求参数绑定给方法形参<a hidden class=anchor aria-hidden=true href=#方式二通过spring提供的requestparam注解将请求参数绑定给方法形参>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@DeleteMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;id&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>deptId</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;根据ID删除部门: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>deptId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>@RequestParam注解required属性默认为true，代表该参数必须传递，如果不传递将报错。如果参数可选，可以将属性设置为false。</p><h3 id=方式三如果请求参数名与形参变量名相同直接定义方法形参即可接收省略requestparam推荐使用>方式三：如果请求参数名与形参变量名相同，直接定义方法形参即可接收。（省略@RequestParam，推荐使用）<a hidden class=anchor aria-hidden=true href=#方式三如果请求参数名与形参变量名相同直接定义方法形参即可接收省略requestparam推荐使用>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@DeleteMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>id</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;根据ID删除部门: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p></p><h1 id=新增部门>新增部门<a hidden class=anchor aria-hidden=true href=#新增部门>#</a></h1><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733360473121-7b134dba-4c40-468b-afe2-70d4c8c2a8ad.png alt></p><p>由于有creat_time和update_time两个属性没有补全，需要在Service层进行补全</p><p>新增操作需要的数据是从POST请求传过去的</p><h2 id=controller层-2>Controller层<a hidden class=anchor aria-hidden=true href=#controller层-2>#</a></h2><p>接收json格式的请求参数：POST /depts ｛&ldquo;name&rdquo;：&ldquo;教研部&rdquo;｝</p><p>JSON格式的参数，通常会使用一个实体对象进行接收。</p><p>规则：JSON数据的键名与方法形参对象的属性名相同，并需要使用@RequestBody注解标识。</p><p>@RequestBody可以将一个Json格式的请求数据直接封装到对象当中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>Dept</span><span class=w> </span><span class=n>dept</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deptService</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=service层-1>Service层<a hidden class=anchor aria-hidden=true href=#service层-1>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>Dept</span><span class=w> </span><span class=n>dept</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dept</span><span class=p>.</span><span class=na>setCreateTime</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dept</span><span class=p>.</span><span class=na>setUpdateTime</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>deptMapper</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>给时间这个属性赋值，调用库LocalDateTime</p><h2 id=mapper层-1>Mapper层<a hidden class=anchor aria-hidden=true href=#mapper层-1>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Insert</span><span class=p>(</span><span class=s>&#34;insert into dept(name, create_time, update_time) values(#{name}, #{createTime}, #{updateTime})&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>Dept</span><span class=w> </span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h1 id=修改部门>修改部门<a hidden class=anchor aria-hidden=true href=#修改部门>#</a></h1><p>修改部门有两个操作，一般修改操作都会有两个操作：1、查询回显 2、修改数据</p><h2 id=查询回显>查询回显<a hidden class=anchor aria-hidden=true href=#查询回显>#</a></h2><p>接收的参数是路径参数，需要用/depts/{id} 来接收</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733706782672-05addf4d-79c4-45c6-9d10-77dd15bb1cef.png alt></p><h3 id=controller层-3>Controller层<a hidden class=anchor aria-hidden=true href=#controller层-3>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/depts/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>getById</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=p>(</span><span class=s>&#34;id&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>id</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;想要查询的id是&#34;</span><span class=o>+</span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Dept</span><span class=w> </span><span class=n>dept</span><span class=o>=</span><span class=n>deptService</span><span class=p>.</span><span class=na>getById</span><span class=p>(</span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>(</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>路径参数接收</p><p><code>&lt;font style="color:rgb(216,57,49);">/depts/1&lt;/font></code>，<code>&lt;font style="color:rgb(216,57,49);">/depts/2&lt;/font></code> 这种在url中传递的参数，我们称之为<strong>路径参数</strong>。 那么如何接收这样的路径参数呢 ？</p><p>路径参数：通过请求URL直接传递参数，使用{…}来标识该路径参数，需要使用 <code>**&lt;font style="color:rgb(46,161,33);">@PathVariable&lt;/font>**</code>获取路径参数。</p><p>注意需要使用注解@PathVariable，如果要赋值的参数和接收的参数名字一样可以简写</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1734401338889-9e0caa48-ea29-42bd-a7cc-8dfb403db164.png alt></p><p>如果路径参数名与controller方法形参名称一致，<code>&lt;font style="color:rgb(46,161,33);">@PathVariable&lt;/font></code>注解的value属性是可以省略的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/depts/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>getById</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p><strong>在url中是否可以携带多个路径参数呢，如：/depts/1/0</strong></p><p><strong>答：可以，接收方式如下</strong></p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733706964786-68aff71d-0507-443f-8d5e-e029ff9a503e.png alt></p><h2 id=修改数据>修改数据<a hidden class=anchor aria-hidden=true href=#修改数据>#</a></h2><p>用的是PUT请求（一般用于更新或者修改数据）</p><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733708308225-a8c2c0f5-f0b5-4e07-a0e6-fee5403256d6.png alt></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@PutMapping</span><span class=p>(</span><span class=s>&#34;/depts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Result</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>Dept</span><span class=w> </span><span class=n>dept</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>deptService</span><span class=p>.</span><span class=na>update</span><span class=p>(</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;需要更新的部门是&#34;</span><span class=o>+</span><span class=n>dept</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Result</span><span class=p>.</span><span class=na>success</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=requestmapping>@RequestMapping<a hidden class=anchor aria-hidden=true href=#requestmapping>#</a></h2><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733708836491-ea9d174f-40af-4dd0-a35f-3e32da3c168e.png alt></p><p>每一个请求都包括了("/depts")</p><p>可以把这个整体抽象到类的上边</p><p><strong>一个完整的请求路径，应该是类上的 @RequestMapping 的value属性 + 方法上的 @RequestMapping的value属性。</strong></p><hr><h1 id=日志技术>日志技术<a hidden class=anchor aria-hidden=true href=#日志技术>#</a></h1><p><img loading=lazy src=/images/Day07%e5%90%8e%e7%ab%afWeb%e5%ae%9e%e6%88%98%ef%bc%88%e9%83%a8%e9%97%a8%e7%ae%a1%e7%90%86%ef%bc%89.assets/1733713314123-12366d2c-9793-4903-a3d7-4d4056f9cf63.png alt></p><p>Slf4j提供的是一套日志操作的接口，最终底层执行的还是Log4j或者Logback的底层日志框架</p><h2 id=logback快速入门>Logback快速入门<a hidden class=anchor aria-hidden=true href=#logback快速入门>#</a></h2><p>准备工作：引入logback的依赖（springboot项目中该依赖已传递）、配置文件logback.xml。</p><p>记录日志：定义日志记录对象Logger，记录日志。</p><h3 id=步骤>步骤<a hidden class=anchor aria-hidden=true href=#步骤>#</a></h3><p>1、准备工作：引入logback的依赖（springboot中无需引入，在springboot中已经传递了此依赖）</p><p>2、引入配置文件logback.xml</p><p>3、记录入职：定义日志记录对象Logger：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LogTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//定义日志记录对象</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Logger</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LoggerFactory</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>LogTest</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>testLog</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>log</span><span class=p>.</span><span class=na>debug</span><span class=p>(</span><span class=s>&#34;开始计算...&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=o>[]</span><span class=w> </span><span class=n>nums</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>6</span><span class=p>,</span><span class=w> </span><span class=n>7</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>34</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>23</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>nums</span><span class=p>.</span><span class=na>length</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>nums</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;计算结果为: &#34;</span><span class=o>+</span><span class=n>sum</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>log</span><span class=p>.</span><span class=na>debug</span><span class=p>(</span><span class=s>&#34;结束计算...&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=配置文件详解>配置文件详解<a hidden class=anchor aria-hidden=true href=#配置文件详解>#</a></h2><p>配置文件名：logback.xml</p><p>该配置文件是对Logback日志框架输出的日志进行控制的，可以来配置输出的格式、位置及日志开关等。</p><p>常用的两种输出日志的位置：控制台、系统文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>&lt;!--</span><span class=w> </span><span class=n>控制台输出</span><span class=w> </span><span class=o>--&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>&lt;</span><span class=n>appender</span><span class=w> </span><span class=n>name</span><span class=o>=</span><span class=s>&#34;STDOUT&#34;</span><span class=w> </span><span class=kd>class</span><span class=err>=&#34;</span><span class=nc>ch</span><span class=p>.</span><span class=na>qos</span><span class=p>.</span><span class=na>logback</span><span class=p>.</span><span class=na>core</span><span class=p>.</span><span class=na>ConsoleAppender</span><span class=s>&#34;&gt;...&lt;/appender&gt;
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>&lt;!--</span><span class=w> </span><span class=n>系统文件输出</span><span class=w> </span><span class=o>--&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>&lt;</span><span class=n>appender</span><span class=w> </span><span class=n>name</span><span class=o>=</span><span class=s>&#34;FILE&#34;</span><span class=w> </span><span class=kd>class</span><span class=err>=&#34;</span><span class=nc>ch</span><span class=p>.</span><span class=na>qos</span><span class=p>.</span><span class=na>logback</span><span class=p>.</span><span class=na>core</span><span class=p>.</span><span class=na>rolling</span><span class=p>.</span><span class=na>RollingFileAppender</span><span class=s>&#34;&gt;...&lt;/appender&gt;
</span></span></span></code></pre></div><p>开启日志或者关闭日志</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>&lt;</span><span class=n>root</span><span class=w> </span><span class=n>level</span><span class=o>=</span><span class=s>&#34;ALL&#34;</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>appender</span><span class=o>-</span><span class=n>ref</span><span class=w> </span><span class=n>ref</span><span class=o>=</span><span class=s>&#34;STDOUT&#34;</span><span class=w> </span><span class=o>/&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>appender</span><span class=o>-</span><span class=n>ref</span><span class=w> </span><span class=n>ref</span><span class=o>=</span><span class=s>&#34;FILE&#34;</span><span class=w> </span><span class=o>/&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>&lt;/</span><span class=n>root</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div><p>level=ALL指定输出所有的日志</p><p>level=OFF指定关闭所有的日志输出（不用指定大小写）<br>如果给的值是一个日志级别，那么只会输出这个日志级别及以上的日志信息</p><h2 id=logback日志级别>Logback日志级别<a hidden class=anchor aria-hidden=true href=#logback日志级别>#</a></h2><p>日志级别指的是日志信息的类型，日志都会分级别，常见的日志级别如下（级别由低到高）：</p><table><thead><tr><th style=text-align:center><strong>日志级别</strong></th><th><strong>说明</strong></th><th style=text-align:center><strong>记录方式</strong></th></tr></thead><tbody><tr><td style=text-align:center>trace</td><td>追踪，记录程序运行轨迹 【使用很少】</td><td style=text-align:center>log.trace("&mldr;")</td></tr><tr><td style=text-align:center>debug</td><td>调试，记录程序调试过程中的信息，实际应用中一般将其视为最低级别 【使用较多】</td><td style=text-align:center>log.debug("&mldr;")</td></tr><tr><td style=text-align:center>info</td><td>记录一般信息，描述程序运行的关键事件，如：网络连接、io操作 【使用较多】</td><td style=text-align:center>log.info("&mldr;")</td></tr><tr><td style=text-align:center>warn</td><td>警告信息，记录潜在有害的情况 【使用较多】</td><td style=text-align:center>log.warn("&mldr;")</td></tr><tr><td style=text-align:center>error</td><td>错误信息 【使用较多】</td><td style=text-align:center>log.error("&mldr;")</td></tr></tbody></table><p>可以在配置文件中，灵活的控制输出那些类型的日志。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>&lt;</span><span class=n>root</span><span class=w> </span><span class=n>level</span><span class=o>=</span><span class=s>&#34;info&#34;</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>appender</span><span class=o>-</span><span class=n>ref</span><span class=w> </span><span class=n>ref</span><span class=o>=</span><span class=s>&#34;STDOUT&#34;</span><span class=w> </span><span class=o>/&gt;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>appender</span><span class=o>-</span><span class=n>ref</span><span class=w> </span><span class=n>ref</span><span class=o>=</span><span class=s>&#34;FILE&#34;</span><span class=w> </span><span class=o>/&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>&lt;/</span><span class=n>root</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div><p>有Lombok后直接用注释@Sfl4j 就会生成一个日志对象</p><p>在logback中提供了简化方式，如果输出的字符串里边的参数很多，需要用加号拼接很麻烦，可以使用{}占位符，调用info方法的时候，有多少个占位符，传递多少个参数，会自动替换，就可以避免字符串的拼接</p><p>简化了这个代码：这个代码只有类的字节码文件需要改变</p><p>private static final Logger <em>log </em>= LoggerFactory.<em>getLogger</em>(LogTest.class);</p><p></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>&lt;!--</span><span class=n>格式化输出</span><span class=err>：</span><span class=o>%</span><span class=n>d</span><span class=w> </span><span class=n>表示日期</span><span class=err>，</span><span class=o>%</span><span class=n>thread</span><span class=w> </span><span class=n>表示线程名</span><span class=err>，</span><span class=o>%-</span><span class=n>5level表示级别从左显示5个字符宽度</span><span class=err>，</span><span class=o>%</span><span class=n>msg表示日志消息</span><span class=err>，</span><span class=o>%</span><span class=n>n表示换行符</span><span class=w> </span><span class=o>--&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>&lt;</span><span class=n>pattern</span><span class=o>&gt;%</span><span class=n>d</span><span class=p>{</span><span class=n>yyyy</span><span class=o>-</span><span class=n>MM</span><span class=o>-</span><span class=n>dd</span><span class=w> </span><span class=n>HH</span><span class=p>:</span><span class=n>mm</span><span class=p>:</span><span class=n>ss</span><span class=p>.</span><span class=na>SSS</span><span class=p>}</span><span class=w> </span><span class=o>[%</span><span class=n>thread</span><span class=o>]</span><span class=w> </span><span class=o>%-</span><span class=n>5level</span><span class=w> </span><span class=o>%</span><span class=n>logger</span><span class=p>{</span><span class=n>50</span><span class=p>}</span><span class=o>-%</span><span class=n>msg</span><span class=o>%</span><span class=n>n</span><span class=o>&lt;/</span><span class=n>pattern</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div><p>SSS是需要显示毫秒，logger{50}是最多显示50个字符，如果超过了50个字符，会自动简写</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wqnm1gb.github.io/tags/java-web/>Java Web</a></li></ul><nav class=paginav><a class=prev href=https://wqnm1gb.github.io/posts/day08%E5%90%8E%E7%AB%AFweb%E5%AE%9E%E6%88%98%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86/><span class=title>« 上一页</span><br><span>Day08 后端Web实战（员工管理）</span>
</a><a class=next href=https://wqnm1gb.github.io/posts/day06java%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/><span class=title>下一页 »</span><br><span>Day06 Java操作数据库</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wqnm1gb.github.io/>三狗子的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>